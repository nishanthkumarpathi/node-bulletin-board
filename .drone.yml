kind: pipeline
name: default

steps:

- name: build
  image: node:current-slim
  commands:
  - cd /usr/src/app
  - npm install

- name: publish
  image: plugins/docker
  settings:
    repo: nishanthkp/node-app
    auto_tag: true
    username:
      from_secret: DOCKER_USERNAME
    password:
      from_secret: DOCKER_PASSWORD

volumes:
- name: docker
  host:
    path: /var/run/docker.sock
